(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};async function t(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=await n.json(),i=a.main.temp,d=a.main.temp_min;return{currentTemperature:i,currentFeelsLikeTemperature:a.main.feels_like,wind:a.wind.speed,clouds:a.clouds.all,cityName:a.name,todaysMinimum:d}}async function n(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=(await n.json()).list,i={};return a.forEach((e=>{const t=e.dt_txt.split(" ")[0];e.dt_txt.endsWith("00:00:00")?i[t]?i[t].nightTemp=e.main.temp:i[t]={nightTemp:e.main.temp}:e.dt_txt.endsWith("15:00:00")&&(i[t]?(i[t].dayTemp=e.main.temp,i[t].dayDescription=e.weather[0].description,i[t].icon=e.weather[0].icon,i[t].date=t):i[t]={dayTemp:e.main.temp,dayDescription:e.weather[0].description,icon:e.weather[0].icon,date:t})})),Object.values(i)}e.d({},{s:()=>N,d:()=>B});const a=document.getElementById("date"),i=document.getElementById("location"),d=document.getElementById("temp"),o=document.getElementById("real-feel"),c=document.getElementById("sky"),r=document.getElementById("wind"),s=document.getElementById("min-temp"),p=document.getElementById("forecast-container"),l=document.getElementById("favorites"),m=document.getElementById("theme"),u=document.body,h=document.getElementById("container");function g(){p.innerHTML=""}function y(e,t){const n=document.createElement(e);return t&&(n.innerText=t),n}function f(e,t,n,a,i){const d=y("div");d.className="day-container";const o=y("div");o.className="weekday";const c=y("div");c.className="forecastDayTemp";const r=y("div");r.className="forecastDayDescription";const s=y("p",e+"°C"),l=y("p",t+"°C"),m=y("img");m.src=`https://openweathermap.org/img/wn/${a}@2x.png`;const u=y("p",n),h=y("p",i);h.className="dayOfWeek";const g=y("div");g.className="sun-temp-container";const f=y("div");f.className="moon-temp-container";const w=y("img");w.className="sunFill",w.src="./images/sun.svg";const C=y("img");C.className="moonFill",C.src="./images/moon.svg",g.append(w,s),f.append(C,l),o.append(h,u),c.append(g,f),r.append(m),d.append(o,r,c),p.appendChild(d)}function w(e,t,n,a,p,l){const m=y("p",e),u=y("p",t+"°C"),h=y("p","Real Feel is "+n+"°C"),g=y("p",p),f=y("p",a+"m/s"),w=y("p",l+"°C");i.firstChild&&i.removeChild(i.firstChild),d.firstChild&&d.removeChild(d.firstChild),o.firstChild&&o.removeChild(o.firstChild),c.firstChild&&c.removeChild(c.firstChild),r.firstChild&&r.removeChild(r.firstChild),s.firstChild&&s.removeChild(s.firstChild),g.innerText=p<=20?"Sky looks bright":p<=60?"Little bit cloudy":"Cloudy day",r.firstChild&&r.removeChild(r.firstChild),i.appendChild(m),d.appendChild(u),o.appendChild(h),s.appendChild(w),c.appendChild(g),r.appendChild(f)}m.addEventListener("change",(()=>{u.style.backgroundImage=`url("https://raw.githubusercontent.com/vladius9512/weatherApp/gh-pages/images/${m.value}.jpg")`,"dark"===m.value?h.style.backgroundColor="unset":window.innerWidth>830&&(h.style.backgroundColor="rgba(0, 0, 0, 0.2)")}));const C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let T=[],b="cluj",v=26.769379,E=43.5899542;const k=document.getElementById("search"),D=document.getElementById("favorite");async function N(e,a){const i=await t(e,a),d=await n(e,a);w(i.cityName,i.currentTemperature,i.currentFeelsLikeTemperature,i.wind,i.clouds,i.todaysMinimum),g(),"nightTemp"in d[0]||(d[0].nightTemp=d[d.length-1].nightTemp,d.pop());let o=(new Date).getDay();d.forEach((e=>{o>6&&(o=0);const t=C[o];o++,f(e.dayTemp,e.nightTemp,e.dayDescription,e.icon,t)}))}function B(e){T=T.filter((t=>t.name!==e))}async function I(){const e=await async function(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=await n.json();return{currentTemperature:a.main.temp,currentFeelsLikeTemperature:a.main.feels_like,wind:a.wind.speed,clouds:a.clouds.all,cityName:a.name}}(v,E),t=await async function(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=(await n.json()).list,i={};return a.forEach((e=>{const t=e.dt_txt.split(" ")[0];e.dt_txt.endsWith("00:00:00")?i[t]?i[t].nightTemp=e.main.temp:i[t]={nightTemp:e.main.temp}:e.dt_txt.endsWith("15:00:00")&&(i[t]?(i[t].dayTemp=e.main.temp,i[t].dayDescription=e.weather[0].description,i[t].icon=e.weather[0].icon,i[t].date=t):i[t]={dayTemp:e.main.temp,dayDescription:e.weather[0].description,icon:e.weather[0].icon,date:t})})),Object.values(i)}(v,E);!function(e,t,n,s,p){const l=new Date,m=y("p",l.getDate()+"/"+Number(l.getMonth()+1)+"/"+l.getFullYear()),u=y("p",e),h=y("p",t+"°C"),g=y("p","Real Feel is "+n+"°C"),f=y("p",p);f.innerText=p<=20?"Sky looks bright":p<=60?"Little bit cloudy":"Cloudy day";const w=y("p",s+" m/s");a.appendChild(m),i.appendChild(u),d.appendChild(h),o.appendChild(g),c.appendChild(f),r.appendChild(w)}(e.cityName,e.currentTemperature,e.currentFeelsLikeTemperature,e.wind,e.clouds),"nightTemp"in t[0]||(t[0].nightTemp=t[t.length-1].nightTemp,t.pop());let n=(new Date).getDay();t.forEach((e=>{n>6&&(n=0);const t=C[n];n++,f(e.dayTemp,e.nightTemp,e.dayDescription,e.icon,t)}))}k.addEventListener("keydown",(async e=>{if("Enter"===e.key){const e=k.value;b=k.value,k.value="";const a=await async function(e){const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=5&appid=5b81f0d11c6be7a51dcf784becbd0145`),n=await t.json();return{latitude:n[0].lat,longitude:n[0].lon}}(e),i=a.latitude,d=a.longitude;v=a.latitude,E=a.longitude;const o=await t(i,d),c=await n(i,d);w(o.cityName,o.currentTemperature,o.currentFeelsLikeTemperature,o.wind,o.clouds,o.todaysMinimum),g(),"nightTemp"in c[0]||(c[0].nightTemp=c[c.length-1].nightTemp,c.pop());let r=(new Date).getDay();c.forEach((e=>{r>6&&(r=0);const t=C[r];r++,f(e.dayTemp,e.nightTemp,e.dayDescription,e.icon,t)}))}})),D.addEventListener("click",(()=>{void 0===T.find((e=>e.name===b))&&(T.push({name:b,latitude:v,longitude:E}),function(e,t,n){const a=y("div");a.className="button-container",a.id=e;const i=y("button");i.className="location-button";const d=y("button");d.className="removeBtn",i.innerText=e,a.append(i,d),i.id=e,l.appendChild(a),i.addEventListener("click",(()=>{N(t,n)})),d.addEventListener("click",(()=>{l.removeChild(l.children[e]),B(e)}))}(b,v,E))})),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{v=e.coords.latitude,E=e.coords.longitude,I()}),(()=>{I()})):I()})();