(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};async function t(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=await n.json(),i=parseInt(a.main.temp),d=parseInt(a.main.temp_min);return{currentTemperature:i,currentFeelsLikeTemperature:parseInt(a.main.feels_like),wind:a.wind.speed,clouds:a.clouds.all,cityName:a.name,todaysMinimum:d}}async function n(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=(await n.json()).list,i={};return a.forEach((e=>{const t=e.dt_txt.split(" ")[0];e.dt_txt.endsWith("00:00:00")?i[t]?i[t].nightTemp=parseInt(e.main.temp):i[t]={nightTemp:parseInt(e.main.temp)}:e.dt_txt.endsWith("15:00:00")&&(i[t]?(i[t].dayTemp=parseInt(e.main.temp),i[t].dayDescription=e.weather[0].description,i[t].icon=e.weather[0].icon,i[t].date=t):i[t]={dayTemp:parseInt(e.main.temp),dayDescription:e.weather[0].description,icon:e.weather[0].icon,date:t})})),Object.values(i)}e.d({},{s:()=>k,d:()=>N});const a=document.getElementById("date"),i=document.getElementById("location"),d=document.getElementById("temp"),o=document.getElementById("real-feel"),c=document.getElementById("sky"),s=document.getElementById("wind"),r=document.getElementById("forecast-container"),p=document.getElementById("favorites"),l=document.getElementById("theme"),m=document.body,u=document.getElementById("container");function h(){r.innerHTML=""}function g(e,t){const n=document.createElement(e);return t&&(n.innerText=t),n}function y(e,t,n,a,i){const d=g("div");d.className="day-container";const o=g("div");o.className="weekday";const c=g("div");c.className="forecastDayTemp";const s=g("div");s.className="forecastDayDescription";const p=g("p",e+"°C"),l=g("p",t+"°C"),m=g("img");m.src=`https://openweathermap.org/img/wn/${a}@2x.png`;const u=g("p",n),h=g("p",i);h.className="dayOfWeek";const y=g("div");y.className="sun-temp-container";const f=g("div");f.className="moon-temp-container";const w=g("img");w.className="sunFill",w.src="./images/sun.svg";const C=g("img");C.className="moonFill",C.src="./images/moon.svg",y.append(w,p),f.append(C,l),o.append(h,u),c.append(y,f),s.append(m),d.append(o,s,c),r.appendChild(d)}function f(e,t,n,a,r){const p=g("p",e),l=g("p",t+"°C"),m=g("p","Real Feel is "+n+"°C"),u=g("p",r),h=g("p",a+"m/s");i.firstChild&&i.removeChild(i.firstChild),d.firstChild&&d.removeChild(d.firstChild),o.firstChild&&o.removeChild(o.firstChild),c.firstChild&&c.removeChild(c.firstChild),s.firstChild&&s.removeChild(s.firstChild),u.innerText=r<=20?"Sky looks bright":r<=60?"Little bit cloudy":"Cloudy day",s.firstChild&&s.removeChild(s.firstChild),i.appendChild(p),d.appendChild(l),o.appendChild(m),c.appendChild(u),s.appendChild(h)}l.addEventListener("change",(()=>{m.style.backgroundImage=`url("https://raw.githubusercontent.com/vladius9512/weatherApp/gh-pages/images/${l.value}.jpg")`,"dark"===l.value?u.style.backgroundColor="unset":window.innerWidth>830&&(u.style.backgroundColor="rgba(0, 0, 0, 0.2)")}));const w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let C=[],T="Al-Qassim",b=26.769379,v=43.5899542;const I=document.getElementById("search"),E=document.getElementById("favorite");async function k(e,a){const i=await t(e,a),d=await n(e,a);f(i.cityName,i.currentTemperature,i.currentFeelsLikeTemperature,i.wind,i.clouds),h(),"nightTemp"in d[0]||(d[0].nightTemp=d[d.length-1].nightTemp,d.pop());let o=(new Date).getDay();d.forEach((e=>{o>6&&(o=0);const t=w[o];o++,y(e.dayTemp,e.nightTemp,e.dayDescription,e.icon,t)}))}function N(e){C=C.filter((t=>t.name!==e))}async function D(){const e=await async function(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=await n.json();return{currentTemperature:parseInt(a.main.temp),currentFeelsLikeTemperature:parseInt(a.main.feels_like),wind:a.wind.speed,clouds:a.clouds.all,cityName:a.name}}(b,v);T=e.cityName;const t=await async function(e,t){const n=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=5b81f0d11c6be7a51dcf784becbd0145&units=metric`),a=(await n.json()).list,i={};return a.forEach((e=>{const t=e.dt_txt.split(" ")[0];e.dt_txt.endsWith("00:00:00")?i[t]?i[t].nightTemp=parseInt(e.main.temp):i[t]={nightTemp:parseInt(e.main.temp)}:e.dt_txt.endsWith("15:00:00")&&(i[t]?(i[t].dayTemp=parseInt(e.main.temp),i[t].dayDescription=e.weather[0].description,i[t].icon=e.weather[0].icon,i[t].date=t):i[t]={dayTemp:parseInt(e.main.temp),dayDescription:e.weather[0].description,icon:e.weather[0].icon,date:t})})),Object.values(i)}(b,v);!function(e,t,n,r,p){const l=new Date,m=g("p",l.getDate()+"/"+Number(l.getMonth()+1)+"/"+l.getFullYear()),u=g("p",e),h=g("p",t+"°C"),y=g("p","Real Feel is "+n+"°C"),f=g("p",p);f.innerText=p<=20?"Sky looks bright":p<=60?"Little bit cloudy":"Cloudy day";const w=g("p",r+" m/s");a.appendChild(m),i.appendChild(u),d.appendChild(h),o.appendChild(y),c.appendChild(f),s.appendChild(w)}(e.cityName,e.currentTemperature,e.currentFeelsLikeTemperature,e.wind,e.clouds),"nightTemp"in t[0]||(t[0].nightTemp=t[t.length-1].nightTemp,t.pop());let n=(new Date).getDay();t.forEach((e=>{n>6&&(n=0);const t=w[n];n++,y(e.dayTemp,e.nightTemp,e.dayDescription,e.icon,t)}))}I.addEventListener("keydown",(async e=>{if("Enter"===e.key){const e=I.value;T=I.value,I.value="";const a=await async function(e){const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=5&appid=5b81f0d11c6be7a51dcf784becbd0145`),n=await t.json();return{latitude:n[0].lat,longitude:n[0].lon}}(e),i=a.latitude,d=a.longitude;b=a.latitude,v=a.longitude;const o=await t(i,d),c=await n(i,d);f(o.cityName,o.currentTemperature,o.currentFeelsLikeTemperature,o.wind,o.clouds),h(),"nightTemp"in c[0]||(c[0].nightTemp=c[c.length-1].nightTemp,c.pop());let s=(new Date).getDay();c.forEach((e=>{s>6&&(s=0);const t=w[s];s++,y(e.dayTemp,e.nightTemp,e.dayDescription,e.icon,t)}))}})),E.addEventListener("click",(()=>{void 0===C.find((e=>e.name===T))&&(C.push({name:T,latitude:b,longitude:v}),function(e,t,n){const a=g("div");a.className="button-container",a.id=e;const i=g("button");i.className="location-button";const d=g("button");d.className="removeBtn",i.innerText=e,a.append(i,d),i.id=e,p.appendChild(a),i.addEventListener("click",(()=>{k(t,n)})),d.addEventListener("click",(()=>{p.removeChild(p.children[e]),N(e)}))}(T,b,v))})),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{b=e.coords.latitude,v=e.coords.longitude,D()}),(()=>{D()})):D()})();